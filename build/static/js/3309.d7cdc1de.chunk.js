"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[3309],{50910:function(e,t,a){a(72791);var n=a(78983),r=a(80184);t.Z=function(e){return(0,r.jsx)("div",{className:"row bg-white pt-2 pl-2 mb-4 ",style:{margin:"0px 1px"},children:(0,r.jsx)("div",{className:"col-12  ",children:(0,r.jsx)(n.fj,{className:"d-flex  align-items-center",style:{"--cui-breadcrumb-divider":"'>'"},children:e.breadCrumbsInfo&&e.breadCrumbsInfo.length&&e.breadCrumbsInfo.map((function(e){return(0,r.jsx)(n.Sd,{href:e.href?e.href:null,children:e.name})}))})})})}},73309:function(e,t,a){a.r(t);var n=a(93433),r=a(74165),s=a(15861),i=a(29439),l=a(72791),c=a(59434),d=a(78983),o=a(74569),m=a.n(o),x=a(70895),u=a(79271),p=a(50910),h=a(80184);t.default=function(){var e=(0,c.I0)(),t=(0,c.v9)((function(e){return e.userLogin})).userInfo,a=(0,l.useState)([]),o=(0,i.Z)(a,2),f=o[0],y=o[1],g=(0,l.useState)([]),w=(0,i.Z)(g,2),j=w[0],v=w[1],N=(0,l.useState)([]),b=(0,i.Z)(N,2),k=(b[0],b[1]),D=(0,l.useState)(!1),Z=(0,i.Z)(D,2),C=Z[0],_=Z[1],A=(0,u.k6)();function S(e,t){var a=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()),n=Date.UTC(t.getFullYear(),t.getMonth(),t.getDate());return Math.floor((n-a)/864e5)}(0,l.useEffect)((0,s.Z)((0,r.Z)().mark((function e(){var a,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}},e.next=3,m().get("".concat(x._,"/complaint/approvedByWorks"),a);case 3:n=e.sent,s=n.data,y(s),v(s),k(s);case 8:case"end":return e.stop()}}),e)}))),[e]);console.log("allComplaints",f);var I=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(a){var s,i,l,c,d;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t.token)}},e.next=3,m().post("".concat(x._,"/complaint/mark/completed/").concat(a._id),s);case 3:i=e.sent,i.data&&(a.status="completed",l=(0,n.Z)(f),c=l.filter((function(e){return e.id==a._id})),d=l.indexOf(c[0]),l[d]=a,y(l));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("main",{className:"main-div",children:[(0,h.jsx)(p.Z,{breadCrumbsInfo:[{name:"Home",href:"/"},{name:"Complaints"},{name:"Approved Complaints"}]}),(0,h.jsxs)("div",{className:"row",children:[(0,h.jsx)("div",{className:"col-6"}),(0,h.jsx)("div",{className:"col-6",children:(0,h.jsxs)("div",{className:"row",children:[(0,h.jsxs)("div",{className:"col-6 d-flex justify-content-center",children:[(0,h.jsx)("div",{className:"d-flex justify-content-center align-items-center mr-3",children:"Complaints"}),(0,h.jsxs)(d.LX,{"aria-label":"Default select example",onChange:function(e){!function(e){if("deadline"===e){_(!0);var t=j.filter((function(e){return e.deadline&&"progress"==e.status}));_(!0),y(t)}if("all"===e&&(_(!1),y(j)),"completed"===e){_(!0);var a=j.filter((function(e){return"completed"==e.status}));_(!0),y(a)}}(e.target.value)},children:[(0,h.jsx)("option",{value:"all",children:"All"}),(0,h.jsx)("option",{value:"deadline",children:"In Progress"}),(0,h.jsx)("option",{value:"completed",children:"Completed"})]})]}),(0,h.jsx)("div",{className:"col-6"})]})})]}),(0,h.jsx)("div",{children:(0,h.jsx)("h4",{className:"font-semibold",children:"Approved Complaints"})}),C?(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,h.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,h.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,h.jsx)("thead",{className:"bg-gray-50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lab"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Added By"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,h.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f&&f.length?f.map((function(e){return(0,h.jsxs)("tr",{className:"".concat("completed"==e.status?"bg-green-400":S(new Date,new Date(e&&e.deadline&&e.deadline))<=-4?"bg-red-500":"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline))<=-2?"bg-yellow-400":""," ")," "),children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.title})})})}),(0,h.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.lab})})})}),(0,h.jsx)("td",{className:"text-base px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.product&&e.product.name}),(0,h.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.user&&e.user.name})})})}),(0,h.jsx)("td",{className:"text-base px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:"completed"==e.status?"Completed":S(new Date,new Date(e&&e.deadline&&e.deadline))<0?"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline)).toString().slice(1,4)," day exeeded "):"".concat(isNaN(S(new Date,new Date(e&&e.deadline&&e.deadline)))?"No deadline given":"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline)).toString().slice(0,4)," days left")," ")}),(0,h.jsx)("td",{className:"text-base px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.deadline?(0,h.jsx)(d.u5,{color:"info",className:"text-white",onClick:function(){return I(e)},children:"completed"==e.status?"Completed":"Mark Completed"}):null})]},e._id)})):f.length})]})})})})}):(0,h.jsx)("div",{className:"flex flex-col",children:(0,h.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,h.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,h.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,h.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,h.jsx)("thead",{className:"bg-gray-50",children:(0,h.jsxs)("tr",{children:[(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lab"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days"}),(0,h.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),(0,h.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f&&f.length?f.map((function(e){return(0,h.jsxs)("tr",{className:"".concat("completed"==e.status?"bg-green-400":S(new Date,new Date(e&&e.deadline&&e.deadline))<=-4?"bg-red-500":"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline))<=-2?"bg-yellow-400":""," ")," "),children:[(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.title})})})}),(0,h.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.lab&&e.lab.name})})})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.hardware&&e.hardware.product&&e.hardware.product.name}),(0,h.jsx)("td",{className:"px-2 py-2 whitespace-nowrap",children:(0,h.jsx)("div",{className:"flex items-center",children:(0,h.jsx)("div",{className:"ml-4",children:(0,h.jsx)("div",{className:"text-base font-medium text-gray-900",children:e.type&&e.type})})})}),(0,h.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:"completed"==e.status?"Completed":S(new Date,new Date(e&&e.deadline&&e.deadline))<0?"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline)).toString().slice(1,4)," day exeeded "):"".concat(isNaN(S(new Date,new Date(e&&e.deadline&&e.deadline)))?"No deadline given":"".concat(S(new Date,new Date(e&&e.deadline&&e.deadline)).toString().slice(0,4)," days left")," ")}),(0,h.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.deadline?null:(0,h.jsx)(d.u5,{color:"dark",className:"text-white",onClick:function(){return A.push("/works/complaints/action/".concat(e._id))},children:"Required Days"}),e.deadline?(0,h.jsx)(d.u5,{color:"info",className:"text-white",onClick:function(){return I(e)},children:"completed"==e.status?"Completed":"Mark Completed"}):null]})]},e._id)})):f.length})]})})})})})]})})}},30907:function(e,t,a){function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}a.d(t,{Z:function(){return n}})},83878:function(e,t,a){function n(e){if(Array.isArray(e))return e}a.d(t,{Z:function(){return n}})},59199:function(e,t,a){function n(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a.d(t,{Z:function(){return n}})},25267:function(e,t,a){function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}a.d(t,{Z:function(){return n}})},29439:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(83878);var r=a(40181),s=a(25267);function i(e,t){return(0,n.Z)(e)||function(e,t){var a=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var n,r,s=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(n=a.next()).done)&&(s.push(n.value),!t||s.length!==t);i=!0);}catch(c){l=!0,r=c}finally{try{i||null==a.return||a.return()}finally{if(l)throw r}}return s}}(e,t)||(0,r.Z)(e,t)||(0,s.Z)()}},93433:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(30907);var r=a(59199),s=a(40181);function i(e){return function(e){if(Array.isArray(e))return(0,n.Z)(e)}(e)||(0,r.Z)(e)||(0,s.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},40181:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(30907);function r(e,t){if(e){if("string"===typeof e)return(0,n.Z)(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?(0,n.Z)(e,t):void 0}}}}]);
//# sourceMappingURL=3309.d7cdc1de.chunk.js.map